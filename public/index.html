<!DOCTYPE html>
<html>

<head>
  <meta name="viewport"
        content="width=device-width, initial-scale=1">
  <title> Zee's leaving collection </title>
  <link href="style.css"
        rel="stylesheet" />
  <script src="https://checkout.stripe.com/checkout.js"></script>
</head>

<body class="background">
  <h1>Farewell Zee</h1>
  <h2>thanks for being awesome</h2>
  <form id="input">
    <div>
      <label for="displayName">Your name, as you'd like it to appear?</label>
      <input id="displayName"
             type="text" />
    </div>
    <div>
      <label for="giftAmount">How much would you like to give?</label>
      <output id="amount">5.00</output>      
      <input id="giftAmount"
             type="range"
             min="0"
             max="25"
             step=".5"
             value="5.00"
             oninput="amount.value = Number(giftAmount.value).toFixed(2)" /> Â£

    </div>
    <div>
      <label for="message">Would you like to leave a message?</label>
      <textarea id="message"
                rows="5"></textarea>
    </div>
    <button class="btn btn-primary btn-lg"
            id="stripe-button">
        Checkout <span class="glyphicon glyphicon-shopping-cart"></span>
      </button>
  </form>

</body>

<script>
  var handler = StripeCheckout.configure(
  {
    key: 'pk_test_hy0Ff5R7sslD3Yc1asip9xR5',
    image: 'https://stripe.com/img/documentation/checkout/marketplace.png',
    locale: 'auto',
    token: function(token)
    {
      // You can access the token ID with `token.id`.
      // Get the token ID to your server-side code for use.
    }
  });

  document.getElementById('giftAmount').value = document.getElementById("amount").value

  document.getElementById('stripe-button').addEventListener('click', function(e)
  {
    console.log(document.getElementById('amount').value)
    handler.open(
    {
      name: 'Zee\'s leaving collection',
      description: 'for being an awesome meerkat',
      currency: 'gbp',
      amount: document.getElementById('amount').value * 100
    });
    e.preventDefault();
  });

  // Close Checkout on page navigation:
  window.addEventListener('popstate', function()
  {
    handler.close();
  });
</script>

</html>